<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mango Market App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #0d0216;
            --accent: #ff003c;
            --violet: #7000ff;
            --card-bg: rgba(255, 255, 255, 0.07);
        }
        body {
            background: var(--bg);
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0; padding: 0;
            background: radial-gradient(circle at top right, #300030, #0d0216);
            min-height: 100vh;
        }
        .app-container { padding: 20px; padding-bottom: 80px; }
        
        .card {
            background: var(--card-bg);
            border: 1px solid rgba(255, 0, 60, 0.3);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
            transition: 0.3s;
        }
        .card:hover { border-color: var(--accent); transform: scale(1.02); }
        
        h1, h2 { color: var(--accent); text-transform: uppercase; letter-spacing: 2px; }

        .btn {
            background: linear-gradient(45deg, var(--accent), var(--violet));
            border: none; color: white; padding: 12px;
            border-radius: 12px; width: 100%; font-weight: bold;
            cursor: pointer; box-shadow: 0 4px 15px rgba(255, 0, 60, 0.4);
            margin: 5px 0;
        }

        .nav {
            position: fixed; bottom: 0; width: 100%;
            background: rgba(13, 2, 22, 0.9);
            display: flex; justify-content: space-around;
            padding: 15px 0; border-top: 1px solid var(--violet);
            z-index: 1000;
        }
        .nav-item { opacity: 0.5; transition: 0.3s; cursor: pointer; font-size: 14px; }
        .nav-item.active { opacity: 1; color: var(--accent); text-shadow: 0 0 10px var(--accent); }

        .wheel-box { text-align: center; margin-top: 20px; }
        .wheel {
            width: 220px; height: 220px; border-radius: 50%;
            border: 5px solid var(--accent); margin: 0 auto;
            background: conic-gradient(from 0deg, #ff003c, #7000ff, #ff003c, #7000ff);
            transition: 4s cubic-bezier(0.1, 0, 0, 1);
            box-shadow: 0 0 30px var(--violet);
        }

        .hidden { display: none; }
        input {
            width: 90%; padding: 10px; margin: 10px 0;
            background: rgba(0,0,0,0.5); border: 1px solid var(--violet);
            border-radius: 8px; color: white;
        }
        .lang-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="market-page">
        <h2 data-key="market_title">üõç Market</h2>
        <div class="card">
            <h3>Telegram Stars ‚≠ê</h3>
            <p data-key="stars_desc">–®–≤–∏–¥–∫–µ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –≤—Ö—ñ–¥</p>
            <button class="btn" onclick="buy('Stars')" data-key="buy_btn">–ö—É–ø–∏—Ç–∏</button>
        </div>
        <div class="card">
            <h3>Premium üíé</h3>
            <p data-key="prem_desc">–ì—ñ—Ñ—Ç–æ–º –∞–±–æ —á–µ—Ä–µ–∑ –ª–æ–≥—ñ–Ω</p>
            <button class="btn" onclick="buy('Premium')" data-key="buy_btn">–ö—É–ø–∏—Ç–∏</button>
        </div>
    </div>

    <div id="wheel-page" class="hidden">
        <h2 data-key="wheel_title">üé° Fortune Wheel</h2>
        <div class="wheel-box">
            <div class="wheel" id="wheel"></div>
            <p style="margin-top: 20px;"><span data-key="cost_text">–í–∞—Ä—Ç—ñ—Å—Ç—å</span>: 50‚Ç¥</p>
            <button class="btn" onclick="spin()" data-key="spin_btn">–ö—Ä—É—Ç–∏—Ç–∏ üî•</button>
        </div>
    </div>

    <div id="profile-page" class="hidden">
        <h2 data-key="profile_title">üë§ Profile</h2>
        
        <div class="card">
            <h3 data-key="lang_btn">–ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É</h3>
            <div class="lang-grid">
                <button class="btn" onclick="setLanguage('uk')">üá∫üá¶ UA</button>
                <button class="btn" onclick="setLanguage('ru')">üá∑üá∫ RU</button>
                <button class="btn" onclick="setLanguage('en')">üá∫üá∏ EN</button>
            </div>
        </div>

        <div class="card">
            <p>Email: <span id="user-email">–Ω–µ –≤–∫–∞–∑–∞–Ω–æ</span></p>
            <p><span data-key="balance">–ë–∞–ª–∞–Ω—Å</span>: <b id="balance">0.00</b> ‚Ç¥</p>
        </div>
        
        <div class="card">
            <input type="number" id="topup-amount" placeholder="–°—É–º–∞ (‚Ç¥)">
            <button class="btn" onclick="generatePayment()" data-key="topup">–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —á–µ—Ä–µ–∑ TON</button>
            <p id="payment-info" style="font-size: 12px; margin-top: 10px; color: #aaa;"></p>
        </div>
    </div>
</div>

<nav class="nav">
    <div class="nav-item active" id="nav-market" onclick="showPage('market', this)">–ú–∞–≥–∞–∑–∏–Ω</div>
    <div class="nav-item" id="nav-wheel" onclick="showPage('wheel', this)">üé° –£–¥–∞—á—É</div>
    <div class="nav-item" id="nav-profile" onclick="showPage('profile', this)">–ü—Ä–æ—Ñ—ñ–ª—å</div>
</nav>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    const translations = {
        uk: {
            market_title: "üõç –ú–∞—Ä–∫–µ—Ç",
            wheel_title: "üé° –£–¥–∞—á—É",
            profile_title: "üë§ –ü—Ä–æ—Ñ—ñ–ª—å",
            buy_btn: "–ö—É–ø–∏—Ç–∏",
            topup: "–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —á–µ—Ä–µ–∑ TON",
            lang_btn: "–ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É",
            balance: "–ë–∞–ª–∞–Ω—Å",
            stars_desc: "–®–≤–∏–¥–∫–µ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –≤—Ö—ñ–¥",
            prem_desc: "–ì—ñ—Ñ—Ç–æ–º –∞–±–æ —á–µ—Ä–µ–∑ –ª–æ–≥—ñ–Ω",
            cost_text: "–í–∞—Ä—Ç—ñ—Å—Ç—å",
            spin_btn: "–ö—Ä—É—Ç–∏—Ç–∏ üî•",
            nav_m: "–ú–∞–≥–∞–∑–∏–Ω",
            nav_w: "üé° –£–¥–∞—á—É",
            nav_p: "–ü—Ä–æ—Ñ—ñ–ª—å"
        },
        ru: {
            market_title: "üõç –ú–∞—Ä–∫–µ—Ç",
            wheel_title: "üé° –£–¥–∞—á–∞",
            profile_title: "üë§ –ü—Ä–æ—Ñ–∏–ª—å",
            buy_btn: "–ö—É–ø–∏—Ç—å",
            topup: "–ü–æ–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ TON",
            lang_btn: "–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫",
            balance: "–ë–∞–ª–∞–Ω—Å",
            stars_desc: "–ë—ã—Å—Ç—Ä–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—Ö–æ–¥",
            prem_desc: "–ì–∏—Ñ—Ç–æ–º –∏–ª–∏ —á–µ—Ä–µ–∑ –ª–æ–≥–∏–Ω",
            cost_text: "–°—Ç–æ–∏–º–æ—Å—Ç—å",
            spin_btn: "–ö—Ä—É—Ç–∏—Ç—å üî•",
            nav_m: "–ú–∞–≥–∞–∑–∏–Ω",
            nav_w: "üé° –£–¥–∞—á–∞",
            nav_p: "–ü—Ä–æ—Ñ–∏–ª—å"
        },
        en: {
            market_title: "üõç Market",
            wheel_title: "üé° Luck",
            profile_title: "üë§ Profile",
            buy_btn: "Buy",
            topup: "Top up via TON",
            lang_btn: "Change Language",
            balance: "Balance",
            stars_desc: "Fast delivery via login",
            prem_desc: "Gift or login access",
            cost_text: "Cost",
            spin_btn: "Spin üî•",
            nav_m: "Market",
            nav_w: "üé° Luck",
            nav_p: "Profile"
        }
    };

    function setLanguage(lang) {
        document.querySelectorAll('[data-key]').forEach(el => {
            const key = el.getAttribute('data-key');
            if (translations[lang][key]) el.innerText = translations[lang][key];
        });
        document.getElementById('nav-market').innerText = translations[lang].nav_m;
        document.getElementById('nav-wheel').innerText = translations[lang].nav_w;
        document.getElementById('nav-profile').innerText = translations[lang].nav_p;
    }

    function showPage(page, el) {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('market-page').classList.add('hidden');
        document.getElementById('wheel-page').classList.add('hidden');
        document.getElementById('profile-page').classList.add('hidden');
        document.getElementById(page + '-page').classList.remove('hidden');
    }

    function generatePayment() {
        let amount = document.getElementById('topup-amount').value;
        if(!amount) return alert("–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É / –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É");
        let payId = Math.floor(1000 + Math.random() * 9000);
        let wallet = "UQCeajMf5dLZba5lM1Fs8RsPSG26PoomRxINUTnKzJZhLTKg";
        let link = `ton://transfer/${wallet}?amount=${amount * 1000000000}&text=${payId}`;
        document.getElementById('payment-info').innerHTML = `ID: <b>${payId}</b><br>–í–∫–∞–∂—ñ—Ç—å —Ü–µ–π ID –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ!`;
        window.open(link, '_blank');
        tg.sendData(JSON.stringify({action: "payment_start", id: payId, sum: amount}));
    }

    function spin() {
        let w = document.getElementById('wheel');
        let deg = Math.floor(3000 + Math.random() * 3000);
        w.style.transform = `rotate(${deg}deg)`;
        setTimeout(() => alert("–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ!"), 4100);
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    setLanguage('uk');
</script>
</body>
</html>
